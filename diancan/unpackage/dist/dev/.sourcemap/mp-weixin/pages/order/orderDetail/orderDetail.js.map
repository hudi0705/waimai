{"version":3,"file":"orderDetail.js","sources":["pages/order/orderDetail/orderDetail.vue","D:/360MoveData/Users/86156/Desktop/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvb3JkZXIvb3JkZXJEZXRhaWwvb3JkZXJEZXRhaWwudnVl"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <view class=\"header-card\">\r\n      <view class=\"pickup-number-wrapper\">\r\n        <view class=\"pickup-label\">ÂèñÈ§êÂè∑</view>\r\n        <view class=\"pickup-number\">{{ orderDetail.code || '--' }}</view>\r\n      </view>\r\n      <view class=\"status-info\">\r\n        <text class=\"status-text\">{{ orderDetail.is_pay ? (orderDetail.is_taken ? 'Â∑≤ÂèñÈ§ê' : 'Ê≠£Âú®Á≤æÂøÉÂà∂‰Ωú‰∏≠...') : 'ÂæÖÊîØ‰ªò'\r\n        }}</text>\r\n        <text class=\"status-detail\">{{ orderDetail.is_pay ? (orderDetail.is_taken ? 'ÊÑüË∞¢ÊÇ®ÁöÑÊÉ†È°æ' : 'ÁæéÈ£üÂà∂‰Ωú‰∏≠ÔºåÂ∞ΩÂø´‰∏∫ÊÇ®ÊúçÂä°üòä') :\r\n          'ËØ∑Â∞ΩÂø´ÂÆåÊàêÊîØ‰ªò' }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section order-details-section\">\r\n      <view class=\"section-title\">ËÆ¢ÂçïËØ¶ÊÉÖ</view>\r\n      <view class=\"order-item\" v-for=\"(item, index) in orderDetail.order_food\" :key=\"index\">\r\n        <image class=\"item-image\" :src=\"item.food_image || '/static/placeholder.png'\"></image>\r\n        <view class=\"item-info\">\r\n          <text class=\"item-name\">{{ item.food_name || 'Êú™Áü•ÂïÜÂìÅ' }}</text>\r\n          <text class=\"item-quantity\">x {{ item.number || 0 }}</text>\r\n        </view>\r\n        <text class=\"item-price\">Ôø•{{ (parseFloat(item.price) || 0).toFixed(2) }}</text>\r\n      </view>\r\n      <view class=\"subtotal\">\r\n        <text>Â∞èËÆ°</text>\r\n        <text>Ôø•{{ (parseFloat(orderDetail.price) || 0).toFixed(2) }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"section order-info-section\">\r\n      <view class=\"info-row\">\r\n        <text class=\"info-label\">ËÆ¢ÂçïÂè∑Á†Å</text>\r\n        <text class=\"info-value\">{{ orderDetail.sn || '--' }}</text>\r\n      </view>\r\n      <view class=\"info-row\">\r\n        <text class=\"info-label\">‰∏ãÂçïÊó∂Èó¥</text>\r\n        <text class=\"info-value\">{{ orderDetail.create_time || '--' }}</text>\r\n      </view>\r\n      <view class=\"info-row\">\r\n        <text class=\"info-label\">‰ªòÊ¨æÊó∂Èó¥</text>\r\n        <text class=\"info-value\">{{ orderDetail.pay_time || 'Êú™ÊîØ‰ªò' }}</text>\r\n      </view>\r\n      <view class=\"info-row\" v-if=\"orderDetail.comment\">\r\n        <text class=\"info-label\">Â§áÊ≥®</text>\r\n        <text class=\"info-value\">{{ orderDetail.comment }}</text>\r\n      </view>\r\n    </view>\r\n\r\n    <view class=\"footer-button-wrapper\" v-if=\"orderDetail.is_pay\">\r\n      <view class=\"pickup-message-button\">ËØ∑Âá≠Ê≠§È°µÈù¢Ëá≥ÂèñÈ§êÊüúÂè∞È¢ÜÂèñÁæéÈ£ü</view>\r\n    </view>\r\n    <view class=\"footer-button-wrapper\" v-else>\r\n      <view class=\"total-price-info\">\r\n        <text>ÂêàËÆ°:</text>\r\n        <text class=\"total-price\">Ôø•{{ ((parseFloat(orderDetail.price) || 0) - (parseFloat(orderDetail.promotion) ||\r\n          0)).toFixed(2) }}</text>\r\n      </view>\r\n      <view class=\"pay-button\" @click=\"goToPay\">ÂéªÊîØ‰ªò</view>\r\n    </view>\r\n\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      orderId: null,\r\n      phpsessid: null,\r\n      orderDetail: { // Á°Æ‰øùÊâÄÊúâÂ≠óÊÆµÈÉΩÊúâÈªòËÆ§ÂÄºÔºåÈò≤Ê≠¢Ê∏≤ÊüìÊó∂Êä•Èîô\r\n       \r\n      }\r\n    };\r\n  },\r\n  onLoad(options) {\r\n\t  console.log(111111111111111111111);\r\n if (options.order_id) {\r\n   this.orderId = options.order_id;\r\n   if (options.phpsessid) {\r\n     this.phpsessid = options.phpsessid;\r\n   }\r\n   this.getOrderDetails(this.orderId);\r\n }\r\n  },\r\n  methods: {\r\n    getOrderDetails(orderId) {\r\n      uni.showLoading({\r\n        title: 'Âä†ËΩΩ‰∏≠'\r\n      });\r\n      uni.request({\r\n        url: `http://localhost/api/food/order?id=${orderId}`,\r\n        method: 'GET',\r\n        header: {\r\n          'Cookie': this.phpsessid ? 'PHPSESSID=' + this.phpsessid : ''\r\n        },\r\n        success: (res) => {\r\n          console.log('API Response:', res.data);\r\n          if (res.data) {\r\n            this.orderDetail = res.data;\r\n            // Á°Æ‰øù order_food ÊòØÊï∞ÁªÑ\r\n          \r\n          }\r\n        },\r\n        fail: (error) => {\r\n          console.error('ËØ∑Ê±ÇÂ§±Ë¥•:', error);\r\n          uni.showModal({\r\n            title: 'Ëé∑ÂèñËÆ¢ÂçïÂ§±Ë¥•',\r\n            content: 'ÁΩëÁªúËØ∑Ê±ÇÂ§±Ë¥•ÔºåËØ∑ÈáçËØï',\r\n            showCancel: false\r\n          });\r\n        },\r\n        complete: () => {\r\n          uni.hideLoading();\r\n        }\r\n      });\r\n    },\r\n    goToPay() {\r\n      \r\n  }\r\n}}\r\n</script>\r\n\r\n<style>\r\npage {\r\n  background-color: #f8f8f8;\r\n}\r\n\r\n.container {\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-height: 100vh;\r\n  padding-bottom: 120rpx;\r\n  /* Space for the fixed footer */\r\n}\r\n\r\n.header-card {\r\n  background-color: white;\r\n  margin: 20rpx;\r\n  padding: 30rpx;\r\n  border-radius: 8rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.pickup-number-wrapper {\r\n  background-color: #ff9c35;\r\n  color: white;\r\n  padding: 20rpx;\r\n  border-radius: 8rpx;\r\n  text-align: center;\r\n  margin-right: 30rpx;\r\n}\r\n\r\n.pickup-label {\r\n  font-size: 24rpx;\r\n}\r\n\r\n.pickup-number {\r\n  font-size: 48rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.status-info {\r\n  flex-grow: 1;\r\n}\r\n\r\n.status-text {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.status-detail {\r\n  font-size: 28rpx;\r\n  color: #999;\r\n  margin-top: 10rpx;\r\n}\r\n\r\n.section {\r\n  background-color: white;\r\n  margin: 20rpx;\r\n  padding: 20rpx 30rpx;\r\n  border-radius: 8rpx;\r\n  box-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.section-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  margin-bottom: 20rpx;\r\n  color: #333;\r\n}\r\n\r\n.order-item {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.item-image {\r\n  width: 100rpx;\r\n  height: 100rpx;\r\n  margin-right: 20rpx;\r\n  border-radius: 8rpx;\r\n  object-fit: cover;\r\n}\r\n\r\n.item-info {\r\n  flex-grow: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.item-name {\r\n  font-size: 30rpx;\r\n  color: #333;\r\n}\r\n\r\n.item-quantity {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.item-price {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.subtotal {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-top: 20rpx;\r\n  border-top: 1rpx solid #eee;\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.order-info-section .info-row {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-bottom: 15rpx;\r\n  font-size: 28rpx;\r\n}\r\n\r\n.order-info-section .info-label {\r\n  color: #999;\r\n}\r\n\r\n.order-info-section .info-value {\r\n  color: #333;\r\n}\r\n\r\n.footer-button-wrapper {\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 120rpx;\r\n  background-color: #333;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 0 30rpx;\r\n  box-sizing: border-box;\r\n  z-index: 100;\r\n}\r\n\r\n.total-price-info {\r\n  display: flex;\r\n  align-items: baseline;\r\n  color: white;\r\n  margin-right: auto;\r\n  /* Push pay button to right */\r\n}\r\n\r\n.total-price {\r\n  font-size: 40rpx;\r\n  font-weight: bold;\r\n  margin-left: 10rpx;\r\n}\r\n\r\n.pay-button {\r\n  background-color: #ff9c35;\r\n  color: white;\r\n  padding: 20rpx 40rpx;\r\n  border-radius: 60rpx;\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n}\r\n\r\n.pickup-message-button {\r\n  background-color: #ff9c35;\r\n  color: white;\r\n  width: 100%;\r\n  text-align: center;\r\n  padding: 20rpx 0;\r\n  border-radius: 60rpx;\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n}\r\n</style>","import MiniProgramPage from 'C:/Users/86156/Documents/HBuilderProjects/diancan/pages/order/orderDetail/orderDetail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAkEA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,SAAS;AAAA,MACT,WAAW;AAAA,MACX,aAAa;AAAA;AAAA,MAEb;AAAA;EAEH;AAAA,EACD,OAAO,SAAS;AACfA,kBAAAA,MAAA,MAAA,OAAA,iDAAY,mBAAqB;AACnC,QAAI,QAAQ,UAAU;AACpB,WAAK,UAAU,QAAQ;AACvB,UAAI,QAAQ,WAAW;AACrB,aAAK,YAAY,QAAQ;AAAA,MAC3B;AACA,WAAK,gBAAgB,KAAK,OAAO;AAAA,IACnC;AAAA,EACE;AAAA,EACD,SAAS;AAAA,IACP,gBAAgB,SAAS;AACvBA,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,MACT,CAAC;AACDA,oBAAAA,MAAI,QAAQ;AAAA,QACV,KAAK,sCAAsC,OAAO;AAAA,QAClD,QAAQ;AAAA,QACR,QAAQ;AAAA,UACN,UAAU,KAAK,YAAY,eAAe,KAAK,YAAY;AAAA,QAC5D;AAAA,QACD,SAAS,CAAC,QAAQ;AAChBA,wBAAA,MAAA,MAAA,OAAA,iDAAY,iBAAiB,IAAI,IAAI;AACrC,cAAI,IAAI,MAAM;AACZ,iBAAK,cAAc,IAAI;AAAA,UAGzB;AAAA,QACD;AAAA,QACD,MAAM,CAAC,UAAU;AACfA,wBAAc,MAAA,MAAA,SAAA,kDAAA,SAAS,KAAK;AAC5BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,SAAS;AAAA,YACT,YAAY;AAAA,UACd,CAAC;AAAA,QACF;AAAA,QACD,UAAU,MAAM;AACdA,wBAAG,MAAC,YAAW;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACF;AAAA,IACD,UAAU;AAAA,IAEZ;AAAA,EACF;AAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxHD,GAAG,WAAW,eAAe;"}